# 杏桃 - AI中间件统一处理执行

> 该项目处于早起计划版本（画大饼），如果你有兴趣，欢迎参与。
> 
> 如果你有更好的项目也欢迎向我们推荐！

## 项目目标

1. 建立一个以中心AI为核心的中间件，统一管理聊天插件与API服务的交互。


2. 提供智能化的处理功能，使用户可以通过自然语言执行复杂操作。


3. 规范各插件与API服务的对接方式，提高管理与执行效率。


---

## 系统架构设计

### 中心AI处理核心

负责消息解析、自然语言处理、指令分发、逻辑协调。

转发指令到注册的插件或API服务。

支持复杂指令解析（如一句话执行多条指令）。


### 聊天插件层

各类聊天插件（如QQ机器人等）与中心AI交互。

注册支持的指令及介绍。

定义特定情况下可绕过中心AI直接处理的规则。


### API服务层

不直接与聊天插件交互。

通过中心AI处理消息或指令并转发请求。


---

## 核心功能模块

### 1. 指令注册机制

注册内容：

插件名称和版本。

插件支持的指令列表和描述（如用途、参数）。

需要绕过中心AI处理的特殊情况定义。


注册流程：

每个聊天插件在初始化时，向中心AI发送一份指令注册表。

中心AI将指令注册表存储并生成唯一标识。



### 2. 消息处理流程

1. 聊天插件接收到用户消息后，转发到中心AI。


2. 中心AI分析消息：

若消息符合注册指令，执行对应操作。

若符合绕过规则，直接转发到插件处理。

若为复杂操作（如多条指令），分解后逐一处理并返回结果。



3. 处理完成后，中心AI将结果返回给聊天插件，或调用API服务并反馈执行情况。



### 3. API转发机制

聊天插件需注册所需的API服务接口。

中心AI负责验证插件的API调用权限，防止越权。

API请求需附带调用指令的上下文信息，便于API进行智能化处理。

---

## 设计规范

### 1. 聊天插件开发要求

**功能规范**

必须向中心AI注册指令列表，未注册指令不能处理。

明确绕过中心AI处理的场景（如特定敏感指令）。


**通信协议**

统一使用标准协议（如HTTP、WebSocket）与中心AI通信。

必须实现标准化的注册接口。



### 2. 中心AI处理要求

**自然语言解析**

支持多语言识别，能高效解析自然语言的复杂指令。

具备学习和优化能力，持续改进解析准确率。


**指令分发**

优先匹配注册的插件指令。

若未匹配，调用默认逻辑或返回错误提示。



### 3. API服务开发要求

**功能规范**

必须由中心AI中转，不允许与聊天插件直接通信。

需定义可被调用的功能及参数规则。


**权限管理**

所有API请求需通过权限校验。

API接口需记录调用日志，确保可追踪性。


---

## 示例流程

### 用户操作示例

用户通过聊天插件发送一条消息：

> "查询MC服务器状态，并重启服务器"



1. 聊天插件处理

将消息转发至中心AI。



2. 中心AI处理

分析指令，匹配两个操作：

查询MC服务器状态。

重启服务器。


生成两条指令，依次处理：

调用API服务获取服务器状态。

调用API服务执行重启操作。




3. 结果反馈

收集结果后，整合为统一的反馈消息，返回至聊天插件。



---

## 项目管理建议

### 1. 模块化开发

聊天插件、中心AI、API服务独立开发，遵循统一接口规范。



### 2. 可扩展性

支持动态注册新插件和API服务，无需重启系统。



### 3. 日志与监控

记录所有交互日志，提供实时监控和报表功能。



### 4. 安全性

完整的权限校验和对应的处理，通过代码和AI双重校验



---

此设计旨在提升系统整体效率与灵活性，满足用户快速响应复杂需求的目标。
